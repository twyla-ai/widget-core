<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

## init

- Initialises the widget
- Resolves promise on connection success with botName and history
- Rejects promise if hookURL is of invalid format

### Parameters

- `configuration` **[object][1]**
  - `configuration.apiKey` **[string][2]**
  - `configuration.hookURL` **[string][2]**
  - `configuration.logging` **[boolean][3]**
- `onMessage` **[function][4]** callback for incoming messages

Returns **[Promise][5]&lt;[object][1]>** where object = {botName: string, history: Array[{content: string, made_by: string}]}

## send

Sends a message if connected, else queues it

### Parameters

- `message` **[string][2]**

## initiateConversation

- To get the bot to say the intro message (if exists)
  without having the user to send a message first
- Must be called after init

## onConnectionChange

Sets callback for connection change

### Parameters

- `callback` **[function][4]** (isConnected: bool)

## attachToPayload

- Adds a property to the payload object
- If the property already exists, its value will be overwritten

### Parameters

- `key` **[string][2]**
- `value` **any**

## setMetadata

- Adds a property to the metadata object in payload
- If the property already exists, its value will be overwritten

### Parameters

- `key` **[string][2]**
- `value` **any**

## detachFromPayload

Removes a property from the payload object

### Parameters

- `key` **[string][2]**

## setLogging

Turn logging on or off

### Parameters

- `value` **[boolean][3]** true|false

## isLogging

Check if logging is on or off

Returns **[boolean][3]**

## getUserId

Returns a promise that resolves if and when user_id_cookie is available

Returns **[Promise][5]&lt;[string][2]>**

## getBotName

Returns a Promise that resolves with bot name

### Parameters

- `hookURL` **[string][2]** (optional, default `store.configuration.hookURL`)
- `apiKey` **[string][2]** (optional, default `store.configuration.apiKey`)

Returns **[Promise][5]&lt;([Response][6] | never)>**

## endSession

- Closes socket connection for good
- Clears callback references

## clearSession

- Ends session
- Clears all data & cookie

[1]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object
[2]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String
[3]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean
[4]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function
[5]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise
[6]: https://developer.mozilla.org/docs/Web/Guide/HTML/HTML5
